<form class="skilltree-chargen flexcol" autocomplete="off">

    {{#if isSetup}}
    <div class="form-group">
        <label>Starting RollTable UUID</label>
        <input type="text" name="tableUuid" value="{{tableUuid}}" placeholder="RollTable.xxxxx or Compendium....RollTable...." />
        <p class="notes">Must resolve via UUID (recommended) or world table id.</p>
    </div>

    <div class="form-group">
        <label>Choices shown per step</label>
        <input type="number" name="choices" value="{{choices}}" min="1" max="10" />
    </div>

    <div class="form-group">
        <label>Maximum rolls (global)</label>
        <input type="number" name="maxRolls" value="{{maxRolls}}" min="1" max="200" />
    </div>

    <footer class="sheet-footer flexrow">
        <button type="button" data-action="start"><i class="fas fa-play"></i> Start</button>
        <button type="button" data-action="reset"><i class="fas fa-undo"></i> Reset</button>
    </footer>

    {{else}}

    <div class="flexrow" style="gap: 1rem; align-items: center; flex-wrap: wrap;">
        <h3 style="margin:0;">Character Generation</h3>
        <span class="tag">Remaining (global): {{state.remainingGlobal}}</span>
        <span class="tag">Remaining (this table): {{state.remainingHere}}</span>
    </div>

    <p class="notes" style="margin-top:0.5rem;">
        Pick one option. A reward will be rolled and applied.
    </p>

    <div class="cards" style="display:grid; grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); gap: 0.75rem;">
        {{#each cards}}
        <div class="card" style="border:1px solid var(--color-border-light-primary); border-radius:10px; padding:0.75rem;">
            <h4 style="margin:0 0 0.25rem 0;">{{this.title}}</h4>
            <p style="margin:0 0 0.75rem 0;">{{this.text}}</p>
            <button type="button" data-action="choose" data-index="{{@index}}" style="width:100%;">
                Choose
            </button>
        </div>
        {{/each}}
    </div>

    <hr />

    <details>
        <summary>Biography so far</summary>
        <ul>
            {{#each bio}}
            <li>{{this}}</li>
            {{/each}}
        </ul>
    </details>

    <footer class="sheet-footer flexrow" style="margin-top:0.5rem;">
        <button type="button" data-action="reroll"><i class="fas fa-dice"></i> Reroll Options</button>
        <button type="button" data-action="finish"><i class="fas fa-flag-checkered"></i> Finish</button>
    </footer>

    {{/if}}
</form>
