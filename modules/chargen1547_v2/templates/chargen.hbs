<form class="skilltree-chargen flexcol" autocomplete="off">

    {{!-- ================= SETUP MODE ================= --}}
    {{#if isSetup}}

    <section class="chargen-setup">
        <div class="form-group">
            <label>Starting RollTable UUID</label>
            <input type="text"
                   name="tableUuid"
                   value="{{tableUuid}}"
                   placeholder="RollTable.xxxxx or Compendium....RollTable...." />
            <p class="notes">
                Use a RollTable UUID or world table ID.
            </p>
        </div>

        <div class="form-group">
            <label>Choices shown per step</label>
            <input type="number" name="choices" value="{{choices}}" min="1" max="10" />
        </div>

        <div class="form-group">
            <label>Maximum rolls (global)</label>
            <input type="number" name="maxRolls" value="{{maxRolls}}" min="1" max="200" />
        </div>

        <footer class="sheet-footer flexrow">
            <button type="button" data-action="start">
                <i class="fas fa-play"></i> Start
            </button>
            <button type="button" data-action="reset">
                <i class="fas fa-undo"></i> Reset
            </button>
        </footer>
    </section>

    {{!-- ================= RUN MODE ================= --}}
    {{else}}

    <header class="chargen-header flexrow">
        <h2 class="chargen-title">
            <i class="fas fa-scroll"></i>
            Character Generation
        </h2>

        <div class="chargen-counters">
            <span class="tag">
                <i class="fas fa-hourglass-half"></i>
                Global: {{state.remainingGlobal}}
            </span>
            <span class="tag">
                <i class="fas fa-layer-group"></i>
                This Table: {{state.remainingHere}}
            </span>
        </div>
    </header>

    <p class="chargen-instructions">
        Pick one option. A reward will be rolled and applied.
    </p>

    <section class="chargen-cards">
        {{#each cards}}
        <article class="chargen-card" style="--cg-cover: url('{{this.img}}');">

            <div class="card-cover" role="img" aria-label="{{this.title}}"></div>

            <header class="card-header">
                <h3 class="card-title">{{this.title}}</h3>
            </header>

            {{#if this.text}}
            <p class="card-text">{{this.text}}</p>
            {{/if}}

            <button type="button"
                    class="card-choose"
                    data-action="choose"
                    data-index="{{@index}}">
                Choose
            </button>

        </article>
        {{/each}}
    </section>


    <section class="chargen-bio">
        <details>
            <summary>
                <i class="fas fa-book-open"></i>
                Biography so far
            </summary>
            <ul>
                {{#each bio}}
                <li>{{this}}</li>
                {{/each}}
            </ul>
        </details>
    </section>

    <footer class="sheet-footer flexrow chargen-footer">
        <button type="button" data-action="reroll">
            <i class="fas fa-dice"></i> Reroll Options
        </button>
        <button type="button" data-action="finish">
            <i class="fas fa-flag-checkered"></i> Finish
        </button>
    </footer>

    {{/if}}

</form>
